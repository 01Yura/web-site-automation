<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ - Spring Digital Bookstore</title>
    <link rel="icon" type="image/png" href="../favicon.png" />
    <link rel="stylesheet" href="../assets/styles.css" />
    <script src="../assets/copy-code.js"></script>
  </head>
  <body>
    <div class="language-switcher">
      <a href="../index.html" class="lang-link">Home</a>
      <span class="lang-separator">|</span>
      <a href="local-app.html" class="lang-link active">RU</a>
      <span class="lang-separator">|</span>
      <a href="../en/local-app.html" class="lang-link">EN</a>
    </div>

    <div class="card">
      <h1>–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ</h1>
      <ol>
        <li>
          –°–æ–∑–¥–∞–π <strong>docker-compose.yml</strong>, —Å–∫–æ–ø–∏—Ä—É–π —Ç—É–¥–∞ –¥–∞–Ω–Ω–æ–µ
          —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –∑–∞–ø—É—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–æ–π <code>docker-compose up -d</code>.
        </li>
      </ol>

      <div class="code-block copyable">
        <pre><code>services:
  # Zookeeper –¥–ª—è Kafka
  zookeeper:
    image: confluentinc/cp-zookeeper:7.5.0
    container_name: kafka-zookeeper
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
      ZOOKEEPER_TICK_TIME: 2000
    ports:
      - "2181:2181"
    networks:
      - spring-library-network
    healthcheck:
      test: ["CMD-SHELL", "nc -z localhost 2181 || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 5
    restart: unless-stopped

  # Kafka Broker
  kafka:
    image: confluentinc/cp-kafka:7.5.0
    container_name: kafka-broker
    depends_on:
      zookeeper:
        condition: service_healthy
    ports:
      - "9092:9092"
      - "9093:9093"
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9092,PLAINTEXT_INTERNAL://0.0.0.0:29092
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092,PLAINTEXT_INTERNAL://kafka-broker:29092
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_INTERNAL:PLAINTEXT
      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT_INTERNAL
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
      KAFKA_AUTO_CREATE_TOPICS_ENABLE: "true"
      KAFKA_LOG_RETENTION_HOURS: 168 # 7 –¥–Ω–µ–π
      KAFKA_LOG_SEGMENT_BYTES: 1073741824 # 1GB
      KAFKA_TRANSACTION_STATE_LOG_MIN_ISR: 1
      KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: 1
      # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –¥–ª—è Kafka (heap memory)
      KAFKA_HEAP_OPTS: "-Xmx512M -Xms512M"
    networks:
      - spring-library-network
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "kafka-broker-api-versions --bootstrap-server localhost:9092 || exit 1",
        ]
      interval: 30s
      timeout: 10s
      retries: 10
      start_period: 120s
    restart: unless-stopped

  # Kafka UI - –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–æ–ø–∏–∫–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  kafka-ui:
    image: provectuslabs/kafka-ui:latest
    container_name: kafka-ui
    depends_on:
      kafka:
        condition: service_started
    ports:
      - "8089:8080"
    environment:
      KAFKA_CLUSTERS_0_NAME: local
      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: kafka-broker:29092
      KAFKA_CLUSTERS_0_ZOOKEEPER: zookeeper:2181
      # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Basic Auth
      AUTH_TYPE: ${KAFKA_UI_AUTH_TYPE:-BASIC}
      SPRING_SECURITY_USER_NAME: ${KAFKA_UI_USERNAME:-admin}
      SPRING_SECURITY_USER_PASSWORD: ${KAFKA_UI_PASSWORD:-admin}
    networks:
      - spring-library-network
    restart: unless-stopped

  # Analytics Service
  analytics-service:
    image: 01yura/spring-digital-bookstore-analytics-service:latest
    pull_policy: always
    container_name: analytics-service
    depends_on:
      kafka:
        condition: service_healthy
    ports:
      - "8090:8090"
    environment:
      # Kafka Configuration
      KAFKA_BOOTSTRAP_SERVERS: kafka-broker:29092
      SPRING_KAFKA_BOOTSTRAP_SERVERS: kafka-broker:29092
      KAFKA_CONSUMER_GROUP_ID: analytics-service-group
      SPRING_KAFKA_CONSUMER_GROUP_ID: analytics-service-group
      # Server Configuration
      SERVER_PORT: 8090
      # Logging
      LOGGING_LEVEL_ROOT: INFO
      LOGGING_LEVEL_ORG_APACHE_KAFKA: WARN
      LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_KAFKA: INFO
      LOGGING_LEVEL_ONLINE_ITYURA_ANALYTICS: INFO
      # Aggregation interval
      ANALYTICS_AGGREGATION_INTERVAL_MS: ${ANALYTICS_AGGREGATION_INTERVAL_MS:-60000}
    networks:
      - spring-library-network
    restart: unless-stopped
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "wget --no-verbose --tries=1 --spider http://localhost:8090/api/analytics/health || exit 1",
        ]
      interval: 30s
      timeout: 10s
      retries: 5
      start_period: 60s

  # React UI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  ui:
    image: 01yura/spring-digital-library-ui:with_analytics_without_https_for_local_run
    pull_policy: always
    container_name: spring-digital-bookstore-ui
    ports:
      - "80:80"
    networks:
      - spring-library-network
    depends_on:
      - backend
    restart: unless-stopped

  # PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
  postgres:
    image: postgres:16-alpine
    container_name: spring-digital-library-db
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-spring_digital_bookstore}
      POSTGRES_USER: ${POSTGRES_USER:-admin}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-admin}
    ports:
      - "5432:5432"
    volumes:
      # –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ë–î –Ω–∞ —Ö–æ—Å—Ç–µ (–¥–ª—è Windows –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç C:/path/to/dir)
      - ${POSTGRES_DATA_PATH:-C:/spring-digital-bookstore/postgres_data}:/var/lib/postgresql/data
    networks:
      - spring-library-network
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}"]
      interval: 10s
      timeout: 5s
      retries: 5
    restart: unless-stopped

  # Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ HTTPS
  backend:
    image: 01yura/spring-digital-bookstore:with_analytics
    pull_policy: always
    container_name: spring-digital-bookstore-app
    environment:
      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/${POSTGRES_DB:-spring_digital_bookstore}
      SPRING_DATASOURCE_USERNAME: ${SPRING_DATASOURCE_USERNAME:-admin}
      SPRING_DATASOURCE_PASSWORD: ${SPRING_DATASOURCE_PASSWORD:-admin}

      # JPA/Hibernate –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      SPRING_JPA_DATABASE_PLATFORM: ${SPRING_JPA_DATABASE_PLATFORM:-org.hibernate.dialect.PostgreSQLDialect}
      SPRING_JPA_HIBERNATE_DDL_AUTO: ${SPRING_JPA_HIBERNATE_DDL_AUTO:-update}
      SPRING_JPA_SHOW_SQL: ${SPRING_JPA_SHOW_SQL:-false}
      SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL: ${SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL:-true}

      # JWT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      JWT_SECRET: ${JWT_SECRET:-my-secret-key-for-jwt-generation}
      JWT_EXPIRATION: ${JWT_EXPIRATION:-300000}
      JWT_REFRESH_EXPIRATION: ${JWT_REFRESH_EXPIRATION:-86400000}

      # Swagger/OpenAPI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      SPRINGDOC_API_DOCS_PATH: ${SPRINGDOC_API_DOCS_PATH:-/v3/api-docs}
      SPRINGDOC_SWAGGER_UI_PATH: ${SPRINGDOC_SWAGGER_UI_PATH:-/swagger-ui.html}
      SPRINGDOC_SWAGGER_UI_OPERATIONS_SORTER: ${SPRINGDOC_SWAGGER_UI_OPERATIONS_SORTER:-method}
      SPRINGDOC_SWAGGER_UI_TAGS_SORTER: ${SPRINGDOC_SWAGGER_UI_TAGS_SORTER:-alpha}

      # JVM –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      JAVA_OPTS: ${JAVA_OPTS:--Xmx512m -Xms512m}

      # –ü—É—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–Ω–∏–≥ (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
      APP_IMAGES_STORAGE_PATH: /opt/spring-digital-bookstore/pictures
      # –ü—É—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è PDF —Ñ–∞–π–ª–æ–≤ –∫–Ω–∏–≥ (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
      APP_PDF_STORAGE_PATH: /opt/spring-digital-bookstore/pdf

      # Frontend URL –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
      FRONTEND_URL: ${FRONTEND_URL:-http://localhost}

      # Stripe –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      STRIPE_SECRET_KEY: ${STRIPE_SECRET_KEY:-test-value}
      STRIPE_WEBHOOK_SECRET: ${STRIPE_WEBHOOK_SECRET:-test-value}
      STRIPE_SUCCESS_URL: ${STRIPE_SUCCESS_URL:-http://localhost/api/v1/payment/success}
      STRIPE_CANCEL_URL: ${STRIPE_CANCEL_URL:-http://localhost/api/v1/payment/cancel}

      # OpenAI API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      OPENAI_API_KEY: ${OPENAI_API_KEY:-test-value}

      # Gemini API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      GEMINI_API_KEY: ${GEMINI_API_KEY:-test-value}

      # Kafka Configuration –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π
      KAFKA_BOOTSTRAP_SERVERS: kafka-broker:29092
      SPRING_KAFKA_BOOTSTRAP_SERVERS: kafka-broker:29092

      # Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram Bot
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN:-test-value}
      TELEGRAM_CHAT_ID: ${TELEGRAM_CHAT_ID:-test-value}

    ports:
      - "8088:8080"
    volumes:
      # –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–Ω–∏–≥ –≤ –æ–±—ã—á–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —Ö–æ—Å—Ç–µ (–¥–ª—è Windows –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç C:/path/to/dir)
      - ${APP_IMAGES_STORAGE_PATH:-C:/spring-digital-bookstore/pictures}:/opt/spring-digital-bookstore/pictures
      # –•—Ä–∞–Ω–µ–Ω–∏–µ PDF —Ñ–∞–π–ª–æ–≤ –∫–Ω–∏–≥ –≤ –æ–±—ã—á–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —Ö–æ—Å—Ç–µ (–¥–ª—è Windows –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç C:/path/to/dir)
      - ${APP_PDF_STORAGE_PATH:-C:/spring-digital-bookstore/pdf}:/opt/spring-digital-bookstore/pdf
    networks:
      - spring-library-network
    depends_on:
      postgres:
        condition: service_healthy
      kafka:
        condition: service_healthy
    restart: unless-stopped

networks:
  spring-library-network:
    driver: bridge</code></pre>
      </div>
      <p>
        –§—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É
        <a href="http://localhost" target="_blank" rel="noopener"
          >http://localhost</a
        >
      </p>
      <p>
        Swagger –ø–æ –∞–¥—Ä–µ—Å—É
        <a
          href="http://localhost:8088/swagger-ui/index.html"
          target="_blank"
          rel="noopener"
          >http://localhost:8088/swagger-ui/index.html</a
        >
      </p>
      <p>
        Kafka UI –ø–æ –∞–¥—Ä–µ—Å—É:
        <a href="http://localhost:8089" target="_blank" rel="noopener"
          >http://localhost:8089</a
        >
        (admin, admin)
      </p>

      <h2>Credentials –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ —Å–∞–º–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h2>
      <ul>
        <li><strong>–õ–æ–≥–∏–Ω</strong>: <code>admin@gmail.com</code></li>
        <li><strong>–ü–∞—Ä–æ–ª—å</strong>: <code>admin</code></li>
      </ul>

      <h2>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ PostgreSQL —á–µ—Ä–µ–∑ –ª—é–±–æ–π –∫–ª–∏–µ–Ω—Ç (–Ω-—Ä: DBeaver)</h2>
      <ul>
        <li><strong>IP</strong>: <code>localhost:5432</code></li>
        <li>
          <strong>Database</strong>: <code>spring_digital_bookstore</code>
        </li>
        <li><strong>Username</strong>: <code>admin</code></li>
        <li><strong>Password</strong>: <code>admin</code></li>
      </ul>

      <p>
        2. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø–ª–∞—Ç—ã, –∑–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞ –æ –∫–Ω–∏–≥–µ —É
        –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —Ñ–∞–∫—Ç—É —É AI) –∏ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –≤ —Ç–æ–π
        –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≥–¥–µ –ª–µ–∂–∏—Ç
        <strong>docker-compose.yml</strong> –µ—â–µ —Ñ–∞–π–ª <strong>.env</strong> –∏
        –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ –Ω–µ–º —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å
        —Å–∞–º–∏–º (—ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –ø—Ä–∏–¥–µ—Ç—Å—è –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –ª–∏—à–Ω–∏—Ö 15-20 –º–∏–Ω—É—Ç –≤–∞—à–µ–≥–æ
        –≤—Ä–µ–º–µ–Ω–∏):
      </p>

      <div class="code-block copyable">
        <pre><code># –í–æ—Ç —Ç–∞–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–∞—à .env —Ñ–∞–π–ª, –Ω–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞—à–∏!

STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

OPENAI_API_KEY=sk-proj-...
GEMINI_API_KEY=AIzaSy...

TELEGRAM_BOT_TOKEN=68915...
TELEGRAM_CHAT_ID=14310...</code></pre>
      </div>

      <h2>üü¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∫–ª—é—á–µ–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤</h2>

      <h3>1. Stripe ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã –∫–∞—Ä—Ç–∞–º–∏</h3>

      <h4>1.1 –ü–æ–ª—É—á–µ–Ω–∏–µ STRIPE_SECRET_KEY</h4>
      <ol>
        <li>
          –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞
          <a href="https://dashboard.stripe.com" target="_blank" rel="noopener"
            >https://dashboard.stripe.com</a
          >
        </li>
        <li>–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</li>
        <li>–í–æ–π–¥—è, –Ω–∞ –≤—Å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–∫–ª–∏–∫–∞–π—Ç–µ SKIP –∏ –∫–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–π—Ç–∏ –≤ Sandbox –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∏ –≤–∞—Å –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É https://dashboard.stripe.com/–≤–∞—à_–Ω–æ–º–µ—Ä_–∞–∫–∫–∞—É–Ω—Ç–∞/test/dashboard</li>
        <li>–í –ø–æ–∏—Å–∫–µ –Ω–∞–ø–∏—à–∏—Ç–µ API keys –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ Developers ‚Üí API keys</li>
        <li>–ù–∞–π–¥–∏—Ç–µ –∫–ª—é—á <strong>Secret key</strong></li>
        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:</li>
      </ol>
      <div class="code-block">
        <pre><code>STRIPE_SECRET_KEY=sk_test_...</code></pre>
      </div>

      <h4>1.2 –ü–æ–ª—É—á–µ–Ω–∏–µ STRIPE_WEBHOOK_SECRET</h4>
      <ol>
        <li>
          –í –ø–æ–∏—Å–∫–µ –Ω–∞–±–µ—Ä–∏—Ç–µ Webhooks –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ Webhooks</strong>
        </li>
        <li>–ù–∞–∂–º–∏—Ç–µ <strong> + Add destination</strong></li>
        <li>–í—ã–±–µ—Ä–∏—Ç–µ –æ–∫–æ—à–∫–æ <strong>Your account</strong></li>
        <li>–ò —Å—Ä–µ–¥–∏ events –≤—ã–±–µ—Ä–∏—Ç–µ <strong>checkout.session.completed, payment_intent.succeeded, payment_intent.payment_failed</strong></li>
        <li>–ù–∞–∂–º–∏—Ç–µ <strong>Continue</strong></li>
        <li>–í—ã–±–µ—Ä–∏—Ç–µ <strong>Webhook endpoint</strong> –∏ —Å–Ω–æ–≤–∞ –Ω–∞–∂–º–∏—Ç–µ <strong>Continue</strong></li>
        <li>–í –ø–æ–ª–µ Endpoint URL —É–∫–∞–∂–∏—Ç–µ:<strong>http://–í–ê–®_–í–ù–ï–®–ù–ò–ô_IP/api/v1/payment/webhook</strong> –∏ –Ω–∞–∂–º–∏—Ç–µ <strong>Create destination</strong></li>
        <li>
          –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è webhook —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ <strong>Signing secret</strong> –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
        </li>
      <div class="code-block">
        <pre><code>STRIPE_WEBHOOK_SECRET=whsec_...</code></pre>
      </div>

      <h4>1.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ webhook</h4>
      <p>–ß—Ç–æ–±—ã Stripe –º–æ–≥ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É:</p>
      <ol>
        <li>
          –£–∑–Ω–∞–π—Ç–µ –≤–∞—à –≤–Ω–µ—à–Ω–∏–π IP (–Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑
          <a href="https://whatismyip.com" target="_blank" rel="noopener"
            >whatismyip.com</a
          >)
        </li>
        <li>–ù–∞ —Ä–æ—É—Ç–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ <strong>port forwarding</strong>. –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, 
          —Ç–æ –Ω–∞–π–¥–∏—Ç–µ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è –≤–∞—à–µ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä —Ç—É—Ç  <a href="https://club.dns-shop.ru/blog/t-282-tochki-dostupa/22654-probros-portov-i-nastroika-routera-dlya-vneshnego-dostupa/?utm_referrer=https%3A%2F%2Fwww.google.com%2F" target="_blank" rel="noopener">—Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é</a>:</li>
      </ol>
      <div class="code-block">
        <pre><code>–≤–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç 80 ‚Üí –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç 80 –Ω–∞ –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä, –≥–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç backend</code></pre>
      </div>
      <p>
        –ï—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø, Stripe –Ω–µ —Å–º–æ–∂–µ—Ç –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å webhook-–∏, –∏
        –ø–ª–∞—Ç–µ–∂–∏ –Ω–µ –±—É–¥—É—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å—Å—è (—Ö–æ—Ç—è —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è).
      </p>

      <h3>2. OpenAI ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ OPENAI_API_KEY</h3>
      <ol>
        <li>
          –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞:
          <a
            href="https://platform.openai.com/settings/organization/api-keys"
            target="_blank"
            rel="noopener"
            >https://platform.openai.com/settings/organization/api-keys</a
          >
        </li>
        <li>–°–æ–∑–¥–∞–π—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)</li>
        <li>–ù–∞–∂–º–∏—Ç–µ <strong>Create new secret key</strong></li>
        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á:</li>
      </ol>
      <div class="code-block">
        <pre><code>OPENAI_API_KEY=sk-proj-...</code></pre>
      </div>
      <h4>–î–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</h4>
      <ol>
        <li>
          –ü–µ—Ä–µ–π–¥–∏—Ç–µ:
          <a
            href="https://platform.openai.com/settings/organization/data-controls/sharing"
            target="_blank"
            rel="noopener"
            >https://platform.openai.com/settings/organization/data-controls/sharing</a
          >
        </li>
        <li>–í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é <strong>Enable for all projects</strong></li>
      </ol>

      <h3>3. Gemini ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ GEMINI_API_KEY</h3>
      <ol>
        <li>
          –ü–µ—Ä–µ–π–¥–∏—Ç–µ:
          <a
            href="https://aistudio.google.com/app/api-keys"
            target="_blank"
            rel="noopener"
            >https://aistudio.google.com/app/api-keys</a
          >
        </li>
        <li>–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á <strong>Create API key</strong></li>
        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ:</li>
      </ol>
      <div class="code-block">
        <pre><code>GEMINI_API_KEY=AIzaSy...</code></pre>
      </div>
      <p>
        <em
          >–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–≤–æ—Ç–∞ —É Gemini –æ—á–µ–Ω—å –º–∞–ª–∞<br />
          –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å GEMINI_API_KEY, —Ç–æ "–æ—Ç–∑—ã–≤—ã –±–µ–∑ —Ü–µ–Ω–∑—É—Ä—ã" —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥—É—Ç</em
        >
      </p>

      <h3>4. Telegram ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>

      <h4>4.1 –ü–æ–ª—É—á–µ–Ω–∏–µ TELEGRAM_BOT_TOKEN</h4>
      <ol>
        <li>–í Telegram –Ω–∞–π–¥–∏—Ç–µ <code>@BotFather</code></li>
        <li>–û—Ç–ø—Ä–∞–≤—å—Ç–µ <code>/newbot</code></li>
        <li>–ù–∞–∑–æ–≤–∏—Ç–µ –±–æ—Ç–∞</li>
        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω:</li>
      </ol>
      <div class="code-block">
        <pre><code>TELEGRAM_BOT_TOKEN=123456:ABC-DEF...</code></pre>
      </div>

      <h4>4.2 –ü–æ–ª—É—á–µ–Ω–∏–µ TELEGRAM_CHAT_ID</h4>
      <p>–ë—ã—Å—Ç—Ä–µ–µ –≤—Å–µ–≥–æ —á–µ—Ä–µ–∑:</p>
      <ol>
        <li>–í Telegram –Ω–∞–π–¥–∏—Ç–µ <code>@userinfobot</code></li>
        <li>–ù–∞–ø–∏—à–∏—Ç–µ –µ–º—É /start</li>
        <li>–í –æ—Ç–≤–µ—Ç–µ –æ–Ω –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à Chat ID</li>
        <li>–í—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:</li>
      </ol>
      <div class="code-block">
        <pre><code>TELEGRAM_CHAT_ID=123456789</code></pre>
      </div>

      <h3>5. –ü—Ä–∏–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ .env —Ñ–∞–π–ª–∞</h3>
      <div class="code-block">
        <pre><code>STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

OPENAI_API_KEY=sk-proj-...
GEMINI_API_KEY=AIzaSy...

TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_CHAT_ID=123456789</code></pre>
      </div>
    </div>
  </body>
</html>
